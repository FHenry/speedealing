(function(f){void 0==f.fn.inputmask&&(f.inputmask={defaults:{placeholder:"_",optionalmarker:{start:"[",end:"]"},escapeChar:"\\",mask:null,oncomplete:null,onincomplete:null,oncleared:null,repeat:0,greedy:!0,autoUnmask:!1,numericInput:!1,clearMaskOnLostFocus:!0,insertMode:!0,clearIncomplete:!1,aliases:{},definitions:{9:{validator:"[0-9]",cardinality:1},a:{validator:"[A-Za-z]",cardinality:1},"*":{validator:"[A-Za-z0-9]",cardinality:1}},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,
COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91},ignorables:[8,9,13,16,17,18,20,27,33,34,35,36,37,38,39,40,46,91,93,108]},val:f.fn.val},f.fn.inputmask=function(u,Q){function J(a){if(a=b.aliases[a]){if(a.alias)return J(a.alias);f.extend(!0,b,a);return!0}return!1}
function A(){var a=!1,m=0;1==b.mask.length&&!1==b.greedy&&(b.placeholder="");for(var d=f.map(b.mask.split(""),function(c){var d=[];if(c==b.escapeChar)a=!0;else if(c!=b.optionalmarker.start&&c!=b.optionalmarker.end||a){var e=b.definitions[c];if(e&&!a)for(h=0;h<e.cardinality;h++)d.push(y(m+h));else d.push(c),a=!1;m+=d.length;return d}}),c=d.slice(),h=1;h<b.repeat&&b.greedy;h++)c=c.concat(d.slice());return c}function G(){var a=!1,m=!1,d=!1;return f.map(b.mask.split(""),function(c){var h=[];if(c==b.escapeChar)m=
!0;else if(c==b.optionalmarker.start&&!m)d=a=!0;else if(c==b.optionalmarker.end&&!m)a=!1,d=!0;else{var k=b.definitions[c];if(k&&!m){var f=k.prevalidator,e=f?f.length:0;for(i=1;i<k.cardinality;i++){var g=e>=i?f[i-1]:[],j=g.validator,g=g.cardinality;h.push({fn:j?"string"==typeof j?RegExp(j):new function(){this.test=j}:/./,cardinality:g?g:1,optionality:a,newBlockMarker:!0==a?d:!1,offset:0,casing:k.casing,def:c});!0==a&&(d=!1)}h.push({fn:k.validator?"string"==typeof k.validator?RegExp(k.validator):new function(){this.test=
k.validator}:/./,cardinality:k.cardinality,optionality:a,newBlockMarker:d,offset:0,casing:k.casing,def:c})}else h.push({fn:null,cardinality:0,optionality:a,newBlockMarker:d,offset:0,casing:null,def:c}),m=!1;d=!1;return h}})}function z(a,b,d){if(0>a||a>=p())return!1;for(var c=a%g.length,h=b?1:0,f="",w=g[c].cardinality;w>h;w--)f+=d[c-(w-1)];b&&(f+=b);return null!=g[c].fn?g[c].fn.test(f,d,a):!1}function q(a){a=g[a%g.length];return void 0!=a?a.fn:!1}function y(a){return b.placeholder.charAt(a%b.placeholder.length)}
function p(){var a=h.length;!b.greedy&&1<b.repeat&&(a+=h.length*(b.repeat-1));return a}function B(a,b){var d=p();if(b>=d)return d;for(var c=b;++c<d&&!q(c););return c}function K(a,b){var d=b;if(0>=d)return 0;for(;0<--d&&!q(d););return d}function C(a,b,d){var c=d;switch(g[b%g.length].casing){case "upper":c=d.toUpperCase();break;case "lower":c=d.toLowerCase()}a[b]=c}function L(a,b,d){for(;(a.length<b||0>b)&&a.length<p();){var c=0;if(d){c=h.length-1;for(b+=h.length;void 0!==h[c];)a.unshift(h[c--]);break}else for(;void 0!==
h[c];)a.push(h[c++])}return b}function r(a,b,d){a._valueSet(b.join(""));void 0!=d&&(D?setTimeout(function(){j(a,d)},100):j(a,d))}function M(a,b,d){for(var c=p();b<d&&b<c;b++){var f=a,k=b,g=h.slice();C(f,k,g[b])}}function F(a,b){C(a,b,h[b%g.length])}function s(a,m,d){var c=f(a).data("inputmask").isRTL,g=H(a._valueGet(),c).split("");if(c)for(var k=h.length-1,j=k;void 0===g[k]&&void 0!==h[j];)g.unshift(h[j--]);M(m,0,m.length);m.length=h.length;for(var j=k=-1,e=p(),s=g.length,u=0==s?e:-1,x=0;x<s;x++)for(var l=
j+1;l<e;l++)if(q(l)){var t=g[x];!1!==z(l,t,m)?(C(m,l,t),k=j=l):(F(m,l),q(x)&&t==y(x)&&(u=j=l));break}else if(F(m,l),k==j&&(k=l),j=l,g[x]==m[l])break;d&&r(a,m);return B(m,c?b.numericInput?e:u:k)}function N(a){return a.replace(RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\)","gim"),"\\$1")}function H(a,b){return b?a.replace(RegExp("^("+N(h.join(""))+")*"),""):a.replace(RegExp("("+N(h.join(""))+")*$"),"")}function O(a,b){setTimeout(function(){var d=b.slice();if(f(a).data("inputmask").isRTL)for(var c=
0;c<=d.length-1;c++){var h=c%g.length;if(g[h].optionality)if(y(c)==b[c]||!q(c))d.splice(0,1);else break;else break}else for(c=d.length-1;0<=c;c--)if(h=c%g.length,g[h].optionality)if(y(c)==b[c]||!q(c))d.pop();else break;else break;r(a,d)},0)}function P(a,b){var d=a[0];if(g&&(!0===b||!a.hasClass("hasDatepicker"))){var c=h.slice();s(d,c);return f.map(c,function(a,b){var c;if(c=q(b))c=h.slice(),c=a!=c[b];return c?a:null}).join("")}return d._valueGet()}function j(a,h,d){a=a.jquery&&0<a.length?a[0]:a;if("number"==
typeof h){d="number"==typeof d?d:h;!1==b.insertMode&&h==d&&d++;if(a.setSelectionRange)a.setSelectionRange(h,d);else if(a.createTextRange){var c=a.createTextRange();c.collapse(!0);c.moveEnd("character",d);c.moveStart("character",h);c.select()}a.focus()}else{var f=D?c:null,c=null;null==f&&(a.setSelectionRange?(h=a.selectionStart,d=a.selectionEnd):document.selection&&document.selection.createRange&&(c=document.selection.createRange(),h=0-c.duplicate().moveStart("character",-1E5),d=h+c.text.length),f=
{begin:h,end:d});return f}}function I(a){function m(a,b,c){for(;!q(a)&&0<=a-1;)a--;for(var d=a;d<=b&&d<p();d++)if(q(d)){F(e,d);var f=B(e,d),j=e[f];if(j!=y(f))if(f<p()&&!1!==z(d,j,e)&&g[d%g.length].def==g[f%g.length].def)C(e,d,e[f]);else{if(q(d))break}else if(void 0==c)break}else F(e,d);void 0!=c&&C(e,v?b:K(e,b),c);e=H(e.join(""),v).split("");0==e.length&&(e=h.slice());return a}function d(a,b,c,d){for(;a<=b&&a<p();a++)if(q(a)){var f=e[a];C(e,a,c);if(f!=y(a))if(c=B(e,a),c<p())if(!1!==z(c,f,e)&&g[a%
g.length].def==g[c%g.length].def)c=f;else if(q(c))break;else c=f;else break;else if(!0!==d)break}else F(e,a);d=e.length;e=H(e.join(""),v).split("");0==e.length&&(e=h.slice());return b-(d-e.length)}function c(a){A=!1;var c=this,g=a.keyCode,n=j(c);if(g==b.keyCode.BACKSPACE||g==b.keyCode.DELETE||R&&127==g){var k=p();if(0==n.begin&&n.end==k)e=h.slice(),r(c,e),v||j(c,t);else if(1<n.end-n.begin||1==n.end-n.begin&&b.insertMode)M(e,n.begin,n.end),r(c,e,l);else{var l=n.begin-(g==b.keyCode.DELETE?0:1);l>=t&&
(v?(l=d(t,l,y(0),!0),l=B(e,l)):l=m(l,k),r(c,e,l))}b.oncleared&&c._valueGet()==h.join("")&&b.oncleared.call(c);return!1}if(g==b.keyCode.END||g==b.keyCode.PAGE_DOWN)return setTimeout(function(){var d=s(c,e,!1);!b.insertMode&&(d==p()&&!a.shiftKey)&&d--;j(c,a.shiftKey?n.begin:d,d)},0),!1;if(g==b.keyCode.HOME||g==b.keyCode.PAGE_UP)return j(c,0,a.shiftKey?n.begin:0),!1;if(g==b.keyCode.ESCAPE)return c._valueSet(E),j(c,0,s(c,e)),!1;if(g==b.keyCode.INSERT)return b.insertMode=!b.insertMode,j(c,!b.insertMode&&
n.begin==p()?n.begin-1:n.begin),!1;if(a.ctrlKey&&88==g)setTimeout(function(){j(c,s(c,e,!0))},0);else if(!b.insertMode){if(g==b.keyCode.RIGHT)return g=n.begin==n.end?n.end+1:n.end,g=g<p()?g:n.end,j(c,a.shiftKey?n.begin:g,a.shiftKey?g+1:g),!1;if(g==b.keyCode.LEFT)return g=n.begin-1,g=0<g?g:0,j(c,g,a.shiftKey?n.end:g),!1}x=-1!=f.inArray(g,b.ignorables)}function u(a){if(A)return!1;A=!0;a=a||window.event;var c=a.which||a.charCode||a.keyCode;if(a.ctrlKey||a.altKey||a.metaKey||x)return!0;if(c){a=j(this);
var c=String.fromCharCode(c),g=p();if(v){var f=K(e,a.end);z(f,c,e)?!1==z(t,e[t],e)||!1===b.greedy&&e.length<g?(e[t]!=y(t)&&e.length<g&&(a=L(e,-1,v)+1,f+=a,g=e.length),m(t,f,c),r(this,e,b.numericInput?g:f)):b.oncomplete&&b.oncomplete.call(this):D&&r(this,e,a.begin)}else f=B(e,a.begin-1),L(e,f,v),z(f,c,e)?(!0==b.insertMode?d(f,g,c):C(e,f,c),a=B(e,f),r(this,e,a),b.oncomplete&&a==g&&b.oncomplete.call(this)):D&&r(this,e,a.begin);return!1}}var k=f(a);k.data("inputmask",{tests:g,_buffer:h,greedy:b.greedy,
repeat:b.repeat,autoUnmask:b.autoUnmask,definitions:b.definitions,isRTL:!1});var w;Object.getOwnPropertyDescriptor&&(w=Object.getOwnPropertyDescriptor(a,"value"));w&&w.get?a._valueGet||(a._valueGet=w.get,a._valueSet=w.set,Object.defineProperty(a,"value",{get:function(){var a=f(this),b=f(this).data("inputmask");return b&&b.autoUnmask?a.inputmask("unmaskedvalue"):this._valueGet()!=b._buffer.join("")?this._valueGet():""},set:function(a){this._valueSet(a);f(this).triggerHandler("setvalue.inputmask")}})):
document.__lookupGetter__&&a.__lookupGetter__("value")?a._valueGet||(a._valueGet=a.__lookupGetter__("value"),a._valueSet=a.__lookupSetter__("value"),a.__defineGetter__("value",function(){var a=f(this),b=f(this).data("inputmask");return b&&b.autoUnmask?a.inputmask("unmaskedvalue"):this._valueGet()!=b._buffer.join("")?this._valueGet():""}),a.__defineSetter__("value",function(a){this._valueSet(a);f(this).triggerHandler("setvalue.inputmask")})):(a._valueGet||(a._valueGet=function(){return this.value},
a._valueSet=function(a){this.value=a}),!0!=f.fn.val.inputmaskpatch&&(f.fn.val=function(){var a=f(this);if(a.data("inputmask")){if(0==arguments.length){if(a.data("inputmask").autoUnmask)return a.inputmask("unmaskedvalue");var b=f.inputmask.val.apply(this);return b!=a.data("inputmask")._buffer.join("")?b:""}f.inputmask.val.apply(this,arguments);this.triggerHandler("setvalue.inputmask")}else return f.inputmask.val.apply(this,arguments)},f.extend(f.fn.val,{inputmaskpatch:!0})));var e=h.slice(),E=a._valueGet(),
A=!1,x=!1,l=-1,t=B(e,-1),v=!1;if("rtl"==a.dir||b.numericInput)a.dir="ltr",k.css("text-align","right"),k.removeAttr("dir"),inputData=k.data("inputmask"),inputData.isRTL=!0,k.data("inputmask",inputData),v=!0;k.unbind(".inputmask");k.removeClass("focus.inputmask");k.attr("readonly")||k.bind("mouseenter.inputmask",function(){if(!f(this).hasClass("focus.inputmask")){var a=this._valueGet().length;0==a?(e=h.slice(),r(this,e)):a<e.length&&r(this,e)}}).bind("blur.inputmask",function(){var a=f(this),c=this._valueGet();
a.removeClass("focus.inputmask");c!=E&&a.change();b.clearMaskOnLostFocus&&(c==h.join("")?this._valueSet(""):O(this,e));if((b.clearIncomplete||b.onincomplete)&&s(this,e,!0)!=p())b.onincomplete&&b.onincomplete.call(this),b.clearIncomplete&&(b.clearMaskOnLostFocus?this._valueSet(""):(e=h.slice(),r(this,e)))}).bind("focus.inputmask",function(){f(this).addClass("focus.inputmask");E=this._valueGet()}).bind("mouseleave.inputmask",function(){var a=f(this);b.clearMaskOnLostFocus&&(a.hasClass("focus.inputmask")||
(this._valueGet()==h.join("")?this._valueSet(""):O(this,e)))}).bind("click.inputmask",function(){var a=this;setTimeout(function(){var b=j(a);b.begin==b.end&&(b=b.begin,l=s(a,e,!1),v?j(a,b>l&&(z(b,e[b],e)||!q(b))?b:l):j(a,b<l&&(z(b,e[b],e)||!q(b))?b:l))},0)}).bind("dblclick.inputmask",function(){var a=this;setTimeout(function(){j(a,0,l)},0)}).bind("keydown.inputmask",c).bind("keypress.inputmask",u).bind("keyup.inputmask",function(a){var c=f(this);a.keyCode==b.keyCode.TAB&&(c.hasClass("focus.inputmask")&&
0==this._valueGet().length)&&(e=h.slice(),r(this,e),v||j(this,0),E=this._valueGet())}).bind(S,function(){var a=this;setTimeout(function(){j(a,s(a,e,!0))},0)}).bind("setvalue.inputmask",function(){var a=this;setTimeout(function(){E=a._valueGet();s(a,e,!0);a._valueGet()==h.join("")&&a._valueSet("")},0)});setTimeout(function(){l=s(a,e,!0);document.activeElement===a?(k.addClass("focus.inputmask"),j(a,l)):b.clearMaskOnLostFocus&&a._valueGet()==h.join("")&&a._valueSet("")},0)}var b=f.extend(!0,{},f.inputmask.defaults,
Q),S=f.browser.msie?"paste.inputmask":"input.inputmask",R=null!=navigator.userAgent.match(/iphone/i),D=null!=navigator.userAgent.match(/android.*mobile safari.*/i);if(D)var T=navigator.userAgent.match(/mobile safari.*/i),D=533>=parseInt(RegExp(/[0-9]+/).exec(T));if("string"==typeof u)switch(u){case "mask":var h=A(),g=G();return this.each(function(){I(this)});case "unmaskedvalue":return g=this.data("inputmask").tests,h=this.data("inputmask")._buffer,b.greedy=this.data("inputmask").greedy,b.repeat=
this.data("inputmask").repeat,b.definitions=this.data("inputmask").definitions,P(this);case "remove":return this.each(function(){var a=f(this);a.data("inputmask")&&(g=a.data("inputmask").tests,h=a.data("inputmask")._buffer,b.greedy=a.data("inputmask").greedy,b.repeat=a.data("inputmask").repeat,b.definitions=a.data("inputmask").definitions,this._valueSet(P(a,!0)),a.removeData("inputmask"),a.unbind(".inputmask"),a.removeClass("focus.inputmask"),document.__lookupGetter__&&this._valueGet&&(this.__defineGetter__("value",
this._valueGet),this.__defineSetter__("value",this._valueSet),delete this._valueGet,delete this._valueSet))});case "getemptymask":return this.data("inputmask")?this.data("inputmask")._buffer.join(""):"";default:return J(u)||(b.mask=u),h=A(),g=G(),this.each(function(){I(this)})}if("object"==typeof u)return b=f.extend(!0,{},f.inputmask.defaults,u),h=A(),g=G(),this.each(function(){I(this)})})})(jQuery);