angular.module('mean.lead').controller('LeadCreateController', ['$scope', '$http', '$modalInstance', 'Global', 'Lead','object', function($scope, $http, $modalInstance, Global, Lead, object) {

<<<<<<< HEAD
        $scope.global = Global;

        $scope.lead = {
                entity : Global.user.entity,
                societe: {
                        name: object.societe.name,
                        id: object.societe.id
                }
        };

        $scope.init = function() {

                $http({method: 'GET', url: '/api/report/fk_extrafields/lead', params: {
                                field: "Status"
                        }
                }).success(function(data) {

                        $scope.status = data;
                });

        };

        $scope.createLead = function() {

                var lead = new Lead(this.lead);

                lead.$save(function(response) {
                        $modalInstance.close(response);

                });

        };
        
        
}]);
angular.module('mean.lead').controller('LeadController', ['$scope', '$http', '$routeParams', '$modal', '$filter', 'dialogs', 'pageTitle', 'Global', 'object', 'Lead', function($scope, $http, $routeParams, $modal, $filter, $dialogs, pageTitle, Global, object, Lead) {
        
    $scope.findOne = function(){
            
            Lead.get({
                Id: object.lead
            }, function(lead) {
                $scope.lead = lead;
            });
        };
}]);
=======
		$scope.global = Global;

		$scope.lead = {
			entity : Global.user.entity,
			societe: {
				name: object.societe.name,
				id: object.societe.id
			}
		};

		$scope.init = function() {

			$http({method: 'GET', url: '/api/report/fk_extrafields/lead', params: {
					field: "Status"
				}
			}).success(function(data) {

				$scope.status = data;
			});
			
			$http({method: 'GET', url: '/api/report/dict_fk/select', params: {
                field: "prospectlevel"
            }
            }).success(function(data) {

                $scope.potential = data;

            });

		};

		$scope.createLead = function() {

			var lead = new Lead(this.lead);

			lead.$save(function(response) {
				$modalInstance.close(response);

			});

		};

	}]);
>>>>>>> ffe1c22ba0636c3139d3920aee5a0dab1e05beba
